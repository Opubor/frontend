import{r as d,l as R,b as n,j as r,a as o,f as g}from"./index.c55d850e.js";import{D as j}from"./DeleteButton.3f04aad9.js";import{E as L}from"./EditButton.a9b543b8.js";import{B as M}from"./Button.cc2bd9c0.js";import{I as $}from"./Input.fda17e4a.js";import{S as w}from"./SearchInput.d601d567.js";import{S as k}from"./Select.8fb5bdaa.js";import{f as q}from"./index.esm.b63de3f8.js";import"./react-confirm-alert.faa211aa.js";import{O as z,a as G}from"./OptionsTh.51a89229.js";import{T as H,a as J,b as h,c as K,d as c}from"./Thead.0469f9f5.js";import{F as Q}from"./FormLayout.9b4e0445.js";import{T as U}from"./Tabs.6a24e51f.js";import{I as V}from"./IndexNo.59fc62c3.js";import{T as W}from"./TotalNo.2473c2cd.js";import{D as X}from"./DoctorSidebar.9f53444b.js";import{R as Y}from"./index.esm.069163f1.js";import{R as Z}from"./ReactPagination.58cc128c.js";import{B as p}from"./ButtonPreloader.a83113e0.js";import"./index.esm.59588f6b.js";import"./index.esm.a62ec7e6.js";import"./index.esm.7f54cd8a.js";import"./index.esm.1e62d156.js";import"./Forbidden.6616ff59.js";function ve(){const{user:i}=d.exports.useContext(R),[I,v]=d.exports.useState([]),[a,x]=d.exports.useState([]),[b,P]=d.exports.useState(1),[y,m]=d.exports.useState(!1),[s,D]=d.exports.useState({doctorid:`${i==null?void 0:i._id}`,patientid:"",date:""});function u(e){D(t=>({...t,[e.target.name]:e.target.value}))}function f(){n.get("/appointment").then(e=>{x(e.data)}).catch(e=>{g.error(e.data)})}const N=e=>{e.preventDefault(),m(!0),n.post("/appointment",{doctorid:s==null?void 0:s.doctorid,patientid:s==null?void 0:s.patientid,date:s==null?void 0:s.date}).then(t=>{m(!1),f(),g.success(t.data)}).catch(t=>{m(!1),g.error(t.response.data)})};d.exports.useEffect(()=>{n.get("/patient").then(e=>{v(e.data)}),f()},[]);const O=e=>{n.get(`/appointment?q=${e}`).then(t=>{x(t.data),P(1)})},l=10,S=b*l,B=S-l,E=a.slice(B,S),F=Math.ceil(a.length/l),_=e=>{P(e.selected+1)};return r(X,{children:r(U,{label1:"Appointments",label2:"Add Appointment",content1:o("div",{children:[o("div",{className:"flex justify-between items-center",children:[r(w,{onSearch:O}),o("div",{className:"items-center flex flex-col lg:flex-row",children:[r(W,{totalnumber:a==null?void 0:a.length}),r(Z,{pageCount:F,handlePageClick:_})]})]}),o(H,{children:[o(J,{children:[r(V,{children:"#"}),r(h,{children:"Reg. Id"}),r(h,{children:"Patient"}),r(h,{children:"Date (yy/mm/dd)"}),r(h,{children:"Doctor"}),r(z,{children:"Options"})]}),E.map((e,t)=>{var T,A,C;return o(K,{children:[r(c,{children:t+1*(b*l-9)}),r(c,{className:"font-bold",children:(T=e==null?void 0:e.patients[0])==null?void 0:T.registrationId}),r(c,{children:(A=e==null?void 0:e.patients[0])==null?void 0:A.name}),r(c,{children:e==null?void 0:e.date}),r(c,{children:(C=e==null?void 0:e.doctor[0])==null?void 0:C.name}),i._id===(e==null?void 0:e.doctorid)&&o(G,{children:[o(L,{editFunction:`/doctor/edit_appointment?edit=${e==null?void 0:e._id}`,children:["Edit",r(Y,{})]}),o(j,{path:"appointment",id:e==null?void 0:e._id,record:f,children:["Delete",r(q,{})]})]})]},t)})]})]}),content2:r(Q,{formName:"ADD APPOINTMENT",children:o("form",{onSubmit:N,children:[r("input",{type:"hidden",name:"doctorid",onChange:u}),o(k,{label:"Patient",name:"patientid",type:"number",onChange:u,children:[r("option",{value:"",children:"Select Patient"}),I.map((e,t)=>o("option",{value:e==null?void 0:e._id,children:[e==null?void 0:e.registrationId," - ",e==null?void 0:e.name]},t))]}),r($,{label:"Date",type:"date",name:"date",onChange:u}),r(M,{children:y?r(p,{}):"Add Appointment"})]})})})})}export{ve as default};
