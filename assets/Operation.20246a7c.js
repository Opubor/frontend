import{r as d,l as L,b as h,j as t,a,f as p}from"./index.c55d850e.js";import{D as _}from"./DeleteButton.3f04aad9.js";import{E as $}from"./EditButton.a9b543b8.js";import{B as w}from"./Button.cc2bd9c0.js";import{I as S}from"./Input.fda17e4a.js";import{S as M}from"./SearchInput.d601d567.js";import{S as k}from"./Select.8fb5bdaa.js";import{f as q}from"./index.esm.b63de3f8.js";import"./react-confirm-alert.faa211aa.js";import{O as D,a as z}from"./OptionsTh.51a89229.js";import{T as G,a as H,b as i,c as J,d as c}from"./Thead.0469f9f5.js";import{F as K}from"./FormLayout.9b4e0445.js";import{T as Q}from"./Tabs.6a24e51f.js";import{I as U}from"./IndexNo.59fc62c3.js";import{T as V}from"./TotalNo.2473c2cd.js";import{R as W}from"./index.esm.069163f1.js";import{R as X}from"./ReactPagination.58cc128c.js";import{B as Y}from"./ButtonPreloader.a83113e0.js";function xe({role:T}){const{user:r}=d.exports.useContext(L),[C,I]=d.exports.useState([]),[l,g]=d.exports.useState([]),[x,O]=d.exports.useState(1),[v,f]=d.exports.useState(!1),[n,N]=d.exports.useState({staffname:`${r==null?void 0:r.name}`,type:"operation",patientid:"",description:"",date:""});function m(e){N(s=>({...s,[e.target.name]:e.target.value}))}function u(){h.get("/report?type=operation").then(e=>{g(e.data)}).catch(e=>{p.error(e.data)})}const B=e=>{e.preventDefault(),f(!0),h.post("/report",{type:n==null?void 0:n.type,staffname:n==null?void 0:n.staffname,patientid:n==null?void 0:n.patientid,description:n==null?void 0:n.description,date:n==null?void 0:n.date}).then(s=>{f(!1),u(),p.success(s.data)}).catch(s=>{f(!1),p.error(s.response.data)})};d.exports.useEffect(()=>{h.get("/patient").then(e=>{I(e.data)}),u()},[]);const E=e=>{h.get(`/report?type=operation&q=${e}`).then(s=>{g(s.data),O(1)})},o=10,b=x*o,F=b-o,R=l.slice(F,b),j=Math.ceil(l.length/o),A=e=>{O(e.selected+1)};return t(Q,{label1:"Operations",label2:"Add Operation",content1:a("div",{children:[a("div",{className:"flex justify-between items-center",children:[t(M,{onSearch:E}),a("div",{className:"items-center flex flex-col lg:flex-row",children:[t(V,{totalnumber:l==null?void 0:l.length}),t(X,{pageCount:j,handlePageClick:A})]})]}),a(G,{children:[a(H,{children:[t(U,{children:"#"}),t(i,{children:"Reg. Id"}),t(i,{children:"Patient"}),t(i,{children:"Operation Name"}),t(i,{children:"Surgeon"}),t(i,{children:"Date"}),t(i,{children:"Outcome Status"}),(r==null?void 0:r.role)!=="admin"&&t(D,{children:"Options"})]}),R.map((e,s)=>{var y,P;return a(J,{children:[t(c,{children:s+1*(x*o-9)}),t(c,{className:"font-bold",children:(y=e==null?void 0:e.patients[0])==null?void 0:y.registrationId}),t(c,{children:(P=e==null?void 0:e.patients[0])==null?void 0:P.name}),t(c,{children:e==null?void 0:e.description}),t(c,{children:e==null?void 0:e.staffname}),t(c,{children:e==null?void 0:e.date}),t(c,{children:e==null?void 0:e.outcomestatus}),(r==null?void 0:r.role)!=="admin"&&a(z,{children:[a($,{editFunction:`${T}/edit_operation?edit=${e==null?void 0:e._id}`,children:["Edit",t(W,{})]}),a(_,{path:"report",id:e==null?void 0:e._id,record:u,children:["Delete",t(q,{})]})]})]},s)})]})]}),content2:t(K,{formName:"ADD OPERATION",children:a("form",{onSubmit:B,children:[t("input",{type:"hidden",name:"type",onChange:m}),t("input",{type:"hidden",name:"staffname",onChange:m}),a(k,{label:"Patient",name:"patientid",type:"number",onChange:m,children:[t("option",{value:"",children:"Select Patient"}),C.map((e,s)=>a("option",{value:e==null?void 0:e._id,children:[e==null?void 0:e.registrationId," - ",e==null?void 0:e.name]},s))]}),t(S,{label:"Operation Type",type:"text",name:"description",onChange:m}),t(S,{label:"Date",type:"date",name:"date",onChange:m}),t(w,{children:v?t(Y,{}):"Add Operation"})]})})})}export{xe as O};
