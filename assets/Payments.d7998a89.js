import{r as s,l as P,b,a,j as t}from"./index.c55d850e.js";import{A as N}from"./AccountantSidebar.ba771ce4.js";import"./react-confirm-alert.faa211aa.js";import{S}from"./SearchInput.d601d567.js";import{O,a as v}from"./OptionsTh.51a89229.js";import{T as A,a as I,b as l,c as R,d as n}from"./Thead.0469f9f5.js";import{I as j}from"./IndexNo.59fc62c3.js";import{V as k}from"./ViewButton.055de0bb.js";import{R as $}from"./index.esm.069163f1.js";import{R as D}from"./ReactPagination.58cc128c.js";import"./index.esm.b63de3f8.js";import"./index.esm.a62ec7e6.js";import"./Forbidden.6616ff59.js";function E(){const[h,c]=s.exports.useState([]),[u,g]=s.exports.useState(1),{user:d}=s.exports.useContext(P);s.exports.useEffect(()=>{b.get("/prescription").then(e=>{c(e.data)})},[]);const y=e=>{b.get(`/prescription?q=${e}`).then(m=>{c(m.data),g(1)})},o=10,r=u*o,T=r-o,w=h.slice(T,r),C=Math.ceil(h.length/o);return a("div",{className:"p-8 bg-gray-100",children:[a("div",{className:"flex justify-between items-center",children:[t(S,{onSearch:y}),t(D,{pageCount:C,handlePageClick:e=>{g(e.selected+1)}})]}),a(A,{children:[a(I,{children:[t(j,{children:"#"}),t(l,{children:"Reg. Id"}),t(l,{children:"Patient"}),t(l,{children:"Date"}),t(l,{children:"Doctor"}),t(l,{children:"Amount(\u20A6)"}),t(l,{children:"Payment Status"}),(d==null?void 0:d.role)!=="admin"&&t(O,{children:"Options"})]}),w.map((e,m)=>{var x,f,i;return a(R,{children:[t(n,{children:m+1*(u*o-9)}),t(n,{className:"font-bold",children:(x=e==null?void 0:e.patients[0])==null?void 0:x.registrationId}),t(n,{children:(f=e==null?void 0:e.patients[0])==null?void 0:f.name}),t(n,{children:e==null?void 0:e.paymentdate}),t(n,{children:(i=e==null?void 0:e.doctor[0])==null?void 0:i.name}),t(n,{children:a("span",{className:"font-bold",children:["\u20A6",e==null?void 0:e.drugamount]})}),t(n,{children:e.paymentstatus==="Paid"?t("p",{className:"font-bold text-base bg-green-700 text-center px-2 rounded w-24 text-white",children:e==null?void 0:e.paymentstatus}):t("p",{className:"font-bold text-base bg-red-700 text-center px-2 rounded w-24 text-white",children:"Unpaid"})}),(d==null?void 0:d.role)!=="admin"&&t(v,{children:a(k,{style:"bg-green-800 hover:bg-green-600",viewFunction:`/accountant/invoice?edit=${e==null?void 0:e._id}`,children:[t($,{}),"Take Payment"]})})]},m)})]})]})}function W(){return s.exports.useContext(P),t(N,{children:t(E,{})})}export{W as default};
