import{r as l,l as j,b as m,j as o,a as t,f}from"./index.c55d850e.js";import{D as _}from"./DeleteButton.3f04aad9.js";import{E as $}from"./EditButton.a9b543b8.js";import{B as G}from"./Button.cc2bd9c0.js";import{I as b}from"./Input.fda17e4a.js";import{S as w}from"./SearchInput.d601d567.js";import{S}from"./Select.8fb5bdaa.js";import{f as M}from"./index.esm.b63de3f8.js";import"./react-confirm-alert.faa211aa.js";import{O as k,a as q}from"./OptionsTh.51a89229.js";import{T as H,a as z,b as i,c as J,d as a}from"./Thead.0469f9f5.js";import{F as K}from"./FormLayout.9b4e0445.js";import{T as Q}from"./Tabs.6a24e51f.js";import{I as U}from"./IndexNo.59fc62c3.js";import{T as V}from"./TotalNo.2473c2cd.js";import{R as W}from"./index.esm.069163f1.js";import{R as X}from"./ReactPagination.58cc128c.js";import{B as Y}from"./ButtonPreloader.a83113e0.js";function pe({role:O}){const{user:u}=l.exports.useContext(j),[A,T]=l.exports.useState([]),[d,p]=l.exports.useState([]),[B,x]=l.exports.useState(1),[y,g]=l.exports.useState(!1),[n,D]=l.exports.useState({staffname:`${u==null?void 0:u.name}`,patientid:"",bloodgroup:"",bags:"",charges:"",date:""});function s(e){D(r=>({...r,[e.target.name]:e.target.value}))}function h(){m.get("/dischargeblood").then(e=>{p(e.data)}).catch(e=>{f.error(e.data)})}const I=e=>{e.preventDefault(),g(!0),m.post("/dischargeblood",{patientid:n==null?void 0:n.patientid,bloodgroup:n==null?void 0:n.bloodgroup,bags:n==null?void 0:n.bags,charges:n==null?void 0:n.charges,date:n==null?void 0:n.date,staffname:n==null?void 0:n.staffname}).then(r=>{g(!1),h(),f.success(r.data)}).catch(r=>{g(!1),f.error(r.response.data)})};l.exports.useEffect(()=>{m.get("/patient").then(e=>{T(e.data)}),h()},[]);const N=e=>{m.get(`/dischargeblood?q=${e}`).then(r=>{p(r.data),x(1)})},c=10,v=B*c,E=v-c,F=d.slice(E,v),L=Math.ceil(d.length/c),R=e=>{x(e.selected+1)};return o(Q,{label1:"Dispatched Blood",label2:"Add Dispatched Blood",content1:t("div",{children:[t("div",{className:"flex justify-between items-center",children:[o(w,{onSearch:N}),t("div",{className:"items-center flex flex-col lg:flex-row",children:[o(V,{totalnumber:d==null?void 0:d.length}),o(X,{pageCount:L,handlePageClick:R})]})]}),t(H,{children:[t(z,{children:[o(U,{children:"#"}),o(i,{children:"Reg. Id"}),o(i,{children:"Patient"}),o(i,{children:"Blood Group"}),o(i,{children:"No. Of Bags"}),o(i,{children:"Charges"}),o(i,{children:"Date"}),o(k,{children:"Options"})]}),F.map((e,r)=>{var C,P;return t(J,{children:[o(a,{children:r+1*(B*c-9)}),o(a,{className:"font-bold",children:(C=e==null?void 0:e.patients[0])==null?void 0:C.registrationId}),o(a,{children:(P=e==null?void 0:e.patients[0])==null?void 0:P.name}),o(a,{children:e==null?void 0:e.bloodgroup}),o(a,{children:e==null?void 0:e.bags}),t(a,{children:[o("span",{children:"\u20A6"}),e==null?void 0:e.charges]}),o(a,{children:e==null?void 0:e.date}),t(q,{children:[t($,{editFunction:`${O}/edit_dispatchedblood?edit=${e==null?void 0:e._id}`,children:["Edit",o(W,{})]}),t(_,{path:"dischargeblood",id:e==null?void 0:e._id,record:h,children:["Delete",o(M,{})]})]})]},r)})]})]}),content2:o(K,{formName:"ADD DISPATCHED BLOOD",children:t("form",{onSubmit:I,children:[t(S,{label:"Patient",name:"patientid",type:"number",onChange:s,children:[o("option",{value:"",children:"Select Patient"}),A.map((e,r)=>t("option",{value:e==null?void 0:e._id,children:[e==null?void 0:e.registrationId," - ",e==null?void 0:e.name]},r))]}),t(S,{label:"Blood Group",type:"text",name:"bloodgroup",onChange:s,children:[o("option",{value:"",children:"Select Blood Group"}),o("option",{value:"A+",children:"A+"}),o("option",{value:"A-",children:"A-"}),o("option",{value:"B+",children:"B+"}),o("option",{value:"B-",children:"B-"}),o("option",{value:"O+",children:"O+"}),o("option",{value:"O-",children:"O-"}),o("option",{value:"AB+",children:"AB+"}),o("option",{value:"AB-",children:"AB-"})]}),o(b,{label:"No. Of Bags",type:"number",name:"bags",onChange:s}),o(b,{label:"Charges",type:"text",name:"charges",onChange:s}),o(b,{label:"Date",type:"date",name:"date",onChange:s}),o("input",{type:"hidden",name:"staffname",onChange:s}),o(G,{children:y?o(Y,{}):"Add Dispatched Blood"})]})})})}export{pe as D};
