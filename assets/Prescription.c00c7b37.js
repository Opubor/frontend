import{r as s,l as $,b as m,j as t,a,F as M,f as I}from"./index.c55d850e.js";import{D as V}from"./DeleteButton.3f04aad9.js";import{E as k}from"./EditButton.a9b543b8.js";import{B as q}from"./Button.cc2bd9c0.js";import{I as v}from"./Input.fda17e4a.js";import{S as D}from"./SearchInput.d601d567.js";import{S as H}from"./Select.8fb5bdaa.js";import{f as z}from"./index.esm.b63de3f8.js";import"./react-confirm-alert.faa211aa.js";import{O as G,a as J}from"./OptionsTh.51a89229.js";import{T as K,a as Q,b as h,c as U,d as l}from"./Thead.0469f9f5.js";import{F as W}from"./FormLayout.9b4e0445.js";import{T as X}from"./Tabs.6a24e51f.js";import{T as g}from"./Textarea.27dc99c4.js";import{I as Y}from"./IndexNo.59fc62c3.js";import{V as Z}from"./ViewButton.055de0bb.js";import{T as p}from"./TotalNo.2473c2cd.js";import{D as ee}from"./DoctorSidebar.9f53444b.js";import{R as F}from"./index.esm.069163f1.js";import{R as te}from"./ReactPagination.58cc128c.js";import{B as oe}from"./ButtonPreloader.a83113e0.js";import"./index.esm.59588f6b.js";import"./index.esm.a62ec7e6.js";import"./index.esm.7f54cd8a.js";import"./index.esm.1e62d156.js";import"./Forbidden.6616ff59.js";function Ne(){const{user:i}=s.exports.useContext($),[r,f]=s.exports.useState([]),[w,_]=s.exports.useState([]),[x,P]=s.exports.useState(1),[B,u]=s.exports.useState(!1),[o,N]=s.exports.useState({doctorid:`${i==null?void 0:i._id}`,patientid:"",casehistory:"",description:"",medication:"",date:"",drugamount:""});function d(e){N(n=>({...n,[e.target.name]:e.target.value}))}function b(){m.get("/prescription").then(e=>{f(e.data)}).catch(e=>{I.error(e.data)})}const O=e=>{e.preventDefault(),u(!0),m.post("/prescription",{doctorid:o==null?void 0:o.doctorid,patientid:o==null?void 0:o.patientid,casehistory:o==null?void 0:o.casehistory,description:o==null?void 0:o.description,medication:o==null?void 0:o.medication,date:o==null?void 0:o.date,drugamount:o==null?void 0:o.drugamount}).then(n=>{window.location.reload(!0),u(!1)}).catch(n=>{I.error(n.response.data),u(!1)})};s.exports.useEffect(()=>{m.get("/patient").then(e=>{_(e.data)}),b()},[]);const R=e=>{m.get(`/prescription?q=${e}`).then(n=>{f(n.data),P(1)})},c=10,y=x*c,E=y-c,A=r.slice(E,y),j=Math.ceil(r.length/c),L=e=>{P(e.selected+1)};return t(ee,{children:t(X,{label1:"Prescriptions",label2:"Add Prescription",content1:a("div",{children:[a("div",{className:"flex justify-between items-center",children:[t(D,{onSearch:R}),a("div",{className:"items-center flex flex-col lg:flex-row",children:[t(p,{totalnumber:r==null?void 0:r.length}),t(te,{pageCount:j,handlePageClick:L})]})]}),a(K,{children:[a(Q,{children:[t(Y,{children:"#"}),t(h,{children:"Reg. Id"}),t(h,{children:"Patient"}),t(h,{children:"Date"}),t(h,{children:"Doctor"}),t(G,{children:"Options"})]}),A.map((e,n)=>{var C,S,T;return a(U,{children:[t(l,{children:n+1*(x*c-9)}),t(l,{className:"font-bold",children:(C=e==null?void 0:e.patients[0])==null?void 0:C.registrationId}),t(l,{children:(S=e==null?void 0:e.patients[0])==null?void 0:S.name}),t(l,{children:e==null?void 0:e.date}),t(l,{children:(T=e==null?void 0:e.doctor[0])==null?void 0:T.name}),a(J,{children:[a(Z,{viewFunction:`/doctor/view_medications?edit=${e==null?void 0:e._id}`,children:[t(F,{}),"View"]}),(i==null?void 0:i._id)===(e==null?void 0:e.doctorid)&&a(M,{children:[a(k,{editFunction:`/doctor/edit_prescription?edit=${e==null?void 0:e._id}`,children:["Edit",t(F,{})]}),a(V,{path:"prescription",id:e==null?void 0:e._id,record:b,children:["Delete",t(z,{})]})]})]})]},n)})]})]}),content2:t(W,{formName:"ADD PRESCRIPTION",children:a("form",{onSubmit:O,children:[t("input",{type:"hidden",name:"doctorid",onChange:d}),a(H,{label:"Patient",name:"patientid",type:"number",onChange:d,children:[t("option",{children:"Select Patient"}),w.map((e,n)=>a("option",{value:e==null?void 0:e._id,children:[e==null?void 0:e.registrationId," - ",e==null?void 0:e.name]},n))]}),t(g,{label:"Case History",name:"casehistory",type:"text",onChange:d}),t(g,{label:"Ailment/Description",name:"description",type:"text",onChange:d}),t(g,{label:"Medication",name:"medication",type:"text",onChange:d}),t(v,{label:"Amount",name:"drugamount",type:"text",onChange:d}),t(v,{label:"Date",type:"date",name:"date",onChange:d}),t(q,{children:B?t(oe,{}):"Add Prescription"})]})})})})}export{Ne as default};
