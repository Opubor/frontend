import{r as o,b as i,j as t,a,f as m}from"./index.c55d850e.js";import{R}from"./ReceptionistSidebar.095af997.js";import{R as C}from"./index.esm.069163f1.js";import{f as D}from"./index.esm.b63de3f8.js";import{D as E}from"./DeleteButton.3f04aad9.js";import{E as j}from"./EditButton.a9b543b8.js";import{B as y}from"./Button.cc2bd9c0.js";import{S as L}from"./SearchInput.d601d567.js";import{S as I}from"./Select.8fb5bdaa.js";import"./react-confirm-alert.faa211aa.js";import{O as _,a as w}from"./OptionsTh.51a89229.js";import{T as A,a as M,b as $,c as k,d as g}from"./Thead.0469f9f5.js";import{F as z}from"./FormLayout.9b4e0445.js";import{T as G}from"./Tabs.6a24e51f.js";import{I as H}from"./IndexNo.59fc62c3.js";import{T as J}from"./TotalNo.2473c2cd.js";import{R as K}from"./ReactPagination.58cc128c.js";import{B as U}from"./ButtonPreloader.a83113e0.js";import"./index.esm.59588f6b.js";import"./index.esm.1e62d156.js";import"./Forbidden.6616ff59.js";function ue(){const[x,P]=o.exports.useState([]),[n,h]=o.exports.useState([]),[p,f]=o.exports.useState(1),[S,c]=o.exports.useState(!1),[d,b]=o.exports.useState({name:""});function T(e){b(r=>({...r,[e.target.name]:e.target.value}))}function l(){i.get("/queue").then(e=>{h(e.data)}).catch(e=>{m.error(e.data)})}const v=e=>{e.preventDefault(),c(!0),i.post("/queue",{name:d==null?void 0:d.name}).then(r=>{c(!1),l(),m.success(r.data)}).catch(r=>{c(!1),m.error(r.response.data)})};o.exports.useEffect(()=>{i.get("/patient").then(e=>{P(e.data)}),l()},[]);const Q=e=>{i.get(`/queue?q=${e}`).then(r=>{h(r.data),f(1)})},s=10,u=p*s,B=u-s,F=n.slice(B,u),N=Math.ceil(n.length/s),O=e=>{f(e.selected+1)};return t(R,{children:t(G,{label1:"Queue",content1:a("div",{children:[a("div",{className:"flex justify-between items-center",children:[t(L,{onSearch:Q}),a("div",{className:"items-center flex flex-col lg:flex-row",children:[t(J,{totalnumber:n==null?void 0:n.length}),t(K,{pageCount:N,handlePageClick:O})]})]}),a(A,{children:[a(M,{children:[t(H,{children:"#"}),t($,{children:"Patient Name"}),t(_,{children:"Options"})]}),F.map((e,r)=>a(k,{children:[t(g,{children:r+1*(p*s-9)}),t(g,{children:e==null?void 0:e.name}),a(w,{children:[a(j,{editFunction:`/receptionist/edit_queue?edit=${e==null?void 0:e._id}`,children:["Edit",t(C,{})]}),a(E,{path:"queue",id:e==null?void 0:e._id,record:l,children:["Delete",t(D,{})]})]})]},r))]})]}),label2:"Add Patient to Queue",content2:t(z,{formName:"Queue Patients",children:a("form",{onSubmit:v,children:[" ",a(I,{label:"Patient",name:"name",type:"text",onChange:T,children:[t("option",{value:"",children:"Select Patient"}),x.map((e,r)=>t("option",{value:e==null?void 0:e.name,children:e==null?void 0:e.name},r))]}),t(y,{children:S?t(U,{}):"Add  to Queue"})]})})})})}export{ue as default};
