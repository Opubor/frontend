import{u as S,r as o,i as B,b as p,a as s,j as n,f as c}from"./index.c55d850e.js";import{A as E}from"./AccountantSidebar.ba771ce4.js";import{B as L}from"./ButtonPreloader.a83113e0.js";import"./react-confirm-alert.faa211aa.js";import{B as M}from"./Button.cc2bd9c0.js";import{I as u}from"./Input.fda17e4a.js";import{S as h}from"./Select.8fb5bdaa.js";import{F as j}from"./FormLayout.9b4e0445.js";import"./index.esm.b63de3f8.js";import"./index.esm.a62ec7e6.js";import"./Forbidden.6616ff59.js";function q(){const m=S(),[y,g]=o.exports.useState([]),[v,C]=o.exports.useState([]),[b,x]=o.exports.useState(!1),[e,d]=o.exports.useState({patientid:"",purpose:"",modeofpayment:"",amount:"",date:""});function i(t){d(a=>({...a,[t.target.name]:t.target.value}))}let P=B().search;const r=new URLSearchParams(P).get("edit");return o.exports.useEffect(()=>{p.get("/patient").then(t=>{g(t.data)}),p.get(`/payments/?edit=${r}`).then(t=>{var a,l;d(t.data),C((l=(a=t.data)==null?void 0:a.patients[0])==null?void 0:l.name)})},[]),s(E,{children:[" ",n(j,{formName:"Edit Invoice",children:s("form",{onSubmit:t=>{t.preventDefault(),x(!0),p.put(`/payments/${r}`,{patientid:e==null?void 0:e.patientid,purpose:e==null?void 0:e.purpose,modeofpayment:e==null?void 0:e.modeofpayment,amount:e==null?void 0:e.amount,date:e==null?void 0:e.date}).then(a=>{m("/accountant/viewpayments",{replace:!0}),c.success(a.data)}).catch(a=>{c.error(a.response.data)})},children:[(e==null?void 0:e.purpose)!=="Medication/drugs"?s(h,{label:"Patient",name:"patientid",type:"number",onChange:i,children:[n("option",{value:e==null?void 0:e.patientid,children:v}),y.map((t,a)=>n("option",{value:t==null?void 0:t._id,children:t==null?void 0:t.name},a))]}):n("input",{type:"hidden",name:"patientid",value:e==null?void 0:e.patientid,onChange:i}),(e==null?void 0:e.purpose)!=="Medication/drugs"?n(u,{label:"Purpose of Payment",type:"text",name:"purpose",value:e==null?void 0:e.purpose,onChange:i}):n("input",{type:"hidden",name:"purpose",value:e==null?void 0:e.purpose,onChange:i}),s(h,{label:"Mode Of Payment",name:"modeofpayment",type:"text",onChange:i,children:[n("option",{value:e==null?void 0:e.modeofpayment,children:e==null?void 0:e.modeofpayment}),n("option",{value:"Cash",children:"Cash"}),n("option",{value:"Bank Transfer",children:"Bank Transfer"})]}),(e==null?void 0:e.purpose)!=="Medication/drugs"?n(u,{label:"Amount",type:"text",name:"amount",value:e==null?void 0:e.amount,onChange:i}):n("input",{type:"hidden",name:"amount",value:e==null?void 0:e.amount,onChange:i}),n(u,{label:"Date",type:"date",name:"date",value:e==null?void 0:e.date,onChange:i}),n(M,{children:b?n(L,{}):"Edit Payment"})]})})]})}export{q as default};
