import{r as s,l as O,u as y,j as e,F as R,a as o,b as m,f as d}from"./index.c55d850e.js";import{D as j}from"./DeleteButton.3f04aad9.js";import{E as L}from"./EditButton.a9b543b8.js";import{B as I}from"./Button.cc2bd9c0.js";import{I as D}from"./Input.fda17e4a.js";import{S as M}from"./SearchInput.d601d567.js";import{A as _}from"./AdminSidebar.d0abf29e.js";import{O as w,a as $}from"./OptionsTh.51a89229.js";import{T as k,a as q,b as p,c as z,d as h}from"./Thead.0469f9f5.js";import{F as G}from"./FormLayout.9b4e0445.js";import{T as H}from"./Tabs.6a24e51f.js";import{T as J}from"./TotalNo.2473c2cd.js";import{R as K}from"./index.esm.069163f1.js";import{f as Q}from"./index.esm.b63de3f8.js";import{R as U}from"./ReactPagination.58cc128c.js";import{B as V}from"./ButtonPreloader.a83113e0.js";import"./react-confirm-alert.faa211aa.js";import"./index.esm.59588f6b.js";import"./index.esm.a62ec7e6.js";import"./index.esm.dd6fd4e7.js";import"./index.esm.1e62d156.js";import"./index.esm.7f54cd8a.js";import"./Forbidden.6616ff59.js";function bt(){const[b,T]=s.exports.useState(""),[P,S]=s.exports.useState(""),[a,f]=s.exports.useState([]),[u,g]=s.exports.useState(1),[v,n]=s.exports.useState(!1),{user:c}=s.exports.useContext(O);c==null||c.role,y();function l(){m.get("/department").then(t=>{f(t.data)}).catch(t=>{d.error(t.data)})}s.exports.useEffect(()=>{l()},[]);const C=t=>{t.preventDefault(),n(!0),m.post("/department",{name:b,description:P}).then(r=>{n(!1),l(),d.success(r.data)}).catch(r=>{n(!1),d.error(r.response.data)})},E=t=>{m.get(`department?q=${t}`).then(r=>{f(r.data),g(1)})},i=10,x=u*i,F=x-i,N=a.slice(F,x),A=Math.ceil(a.length/i),B=t=>{g(t.selected+1)};return e(R,{children:e(_,{children:e(H,{label1:"Departments",content1:o("div",{children:[o("div",{className:"flex justify-between items-center",children:[e(M,{onSearch:E}),o("div",{className:"items-center flex flex-col lg:flex-row",children:[e(J,{totalnumber:a==null?void 0:a.length}),e(U,{pageCount:A,handlePageClick:B})]})]}),o(k,{children:[o(q,{children:[e(p,{children:"#"}),e(p,{children:"Departments"}),e(p,{children:"Description"}),e(w,{children:"Options"})]}),N.map((t,r)=>o(z,{children:[e(h,{children:r+1*(u*i-9)}),e(h,{children:t==null?void 0:t.name}),e(h,{children:t==null?void 0:t.description}),o($,{children:[o(L,{editFunction:`/admin/edit_department?edit=${t==null?void 0:t._id}`,children:["Edit",e(K,{})]}),o(j,{path:"department",id:t==null?void 0:t._id,record:l,children:["Delete",e(Q,{})]})]})]},r))]})]}),label2:"Add Department",content2:e(G,{formName:"ADD DEPARTMENT",children:o("form",{onSubmit:C,children:[e(D,{label:"Department",type:"text",onChange:t=>{T(t.target.value)}}),e(D,{label:"Description",type:"text",onChange:t=>{S(t.target.value)}}),e(I,{children:v?e(V,{}):"Add Department"})]})})})})})}export{bt as default};
